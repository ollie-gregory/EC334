<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Productivity dispersion, concentration, oligopoly â€“ Advanced Macroeconomics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
window.MathJax = {
  tex: {
    packages: {'[+]': ['color']}
  }
};
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../pages/part3.html">Productivity Dispersion, Concentration, and Oligopoly</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Advanced Macroeconomics</a> 
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/part1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Growing Differences Between Firms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/part2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Firm Heterogeneity and Market Power</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/part3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Productivity Dispersion, Concentration, and Oligopoly</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/part4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Large Firms, Production Networks, and Business Cycles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/part5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Market Power and Innovation</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-do-you-measure-markups" id="toc-how-do-you-measure-markups" class="nav-link active" data-scroll-target="#how-do-you-measure-markups">How do you measure markups?</a>
  <ul class="collapse">
  <li><a href="#why-is-measuring-firm-markups-difficult" id="toc-why-is-measuring-firm-markups-difficult" class="nav-link" data-scroll-target="#why-is-measuring-firm-markups-difficult">Why is measuring firm markups difficult?</a></li>
  <li><a href="#how-does-the-hall-1988-markup-estimator-work" id="toc-how-does-the-hall-1988-markup-estimator-work" class="nav-link" data-scroll-target="#how-does-the-hall-1988-markup-estimator-work">How does the Hall (1988) markup estimator work?</a></li>
  <li><a href="#how-can-we-use-the-estimator" id="toc-how-can-we-use-the-estimator" class="nav-link" data-scroll-target="#how-can-we-use-the-estimator">How can we use the estimator?</a></li>
  </ul></li>
  <li><a href="#oligopoly-atkeson-and-burstein-2008" id="toc-oligopoly-atkeson-and-burstein-2008" class="nav-link" data-scroll-target="#oligopoly-atkeson-and-burstein-2008">Oligopoly: Atkeson and Burstein (2008)</a>
  <ul class="collapse">
  <li><a href="#how-does-the-atkeson-and-burstein-model-alter-the-dixit-stiglitz-model" id="toc-how-does-the-atkeson-and-burstein-model-alter-the-dixit-stiglitz-model" class="nav-link" data-scroll-target="#how-does-the-atkeson-and-burstein-model-alter-the-dixit-stiglitz-model">How does the Atkeson and Burstein model alter the Dixit-Stiglitz model?</a></li>
  <li><a href="#what-is-the-model-environment" id="toc-what-is-the-model-environment" class="nav-link" data-scroll-target="#what-is-the-model-environment">What is the model environment?</a></li>
  <li><a href="#what-is-the-household-optimisation-problem" id="toc-what-is-the-household-optimisation-problem" class="nav-link" data-scroll-target="#what-is-the-household-optimisation-problem">What is the household optimisation problem?</a></li>
  <li><a href="#what-is-the-firm-optimisation-problem" id="toc-what-is-the-firm-optimisation-problem" class="nav-link" data-scroll-target="#what-is-the-firm-optimisation-problem">What is the firm optimisation problem?</a></li>
  </ul></li>
  <li><a href="#concentration-and-markup" id="toc-concentration-and-markup" class="nav-link" data-scroll-target="#concentration-and-markup">Concentration and Markup</a>
  <ul class="collapse">
  <li><a href="#what-determines-the-price-elasticity-of-demand" id="toc-what-determines-the-price-elasticity-of-demand" class="nav-link" data-scroll-target="#what-determines-the-price-elasticity-of-demand">What determines the price elasticity of demand?</a></li>
  <li><a href="#how-can-we-determine-the-markup" id="toc-how-can-we-determine-the-markup" class="nav-link" data-scroll-target="#how-can-we-determine-the-markup">How can we determine the markup?</a></li>
  <li><a href="#what-happens-if-you-are-an-infinitesimal-firm" id="toc-what-happens-if-you-are-an-infinitesimal-firm" class="nav-link" data-scroll-target="#what-happens-if-you-are-an-infinitesimal-firm">What happens if you are an infinitesimal firm?</a></li>
  <li><a href="#what-happens-if-you-are-a-monopolist" id="toc-what-happens-if-you-are-a-monopolist" class="nav-link" data-scroll-target="#what-happens-if-you-are-a-monopolist">What happens if you are a monopolist?</a></li>
  <li><a href="#how-does-the-markup-increase-with-market-share" id="toc-how-does-the-markup-increase-with-market-share" class="nav-link" data-scroll-target="#how-does-the-markup-increase-with-market-share">How does the markup increase with market share?</a></li>
  <li><a href="#can-the-model-explain-the-trends-we-see-in-the-data" id="toc-can-the-model-explain-the-trends-we-see-in-the-data" class="nav-link" data-scroll-target="#can-the-model-explain-the-trends-we-see-in-the-data">Can the model explain the trends we see in the data?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Productivity dispersion, concentration, oligopoly</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="how-do-you-measure-markups" class="level2">
<h2 class="anchored" data-anchor-id="how-do-you-measure-markups">How do you measure markups?</h2>
<section id="why-is-measuring-firm-markups-difficult" class="level3">
<h3 class="anchored" data-anchor-id="why-is-measuring-firm-markups-difficult">Why is measuring firm markups difficult?</h3>
<p>Firm level datasets are based on accounting data.</p>
<ul>
<li>Markups are the ratio of prices to marginal cost and accounting data does not contain either of them.
<ul>
<li>We donâ€™t directly observe marginal cost or prices.</li>
</ul></li>
<li>This means at the firm level we need an estimator to obtain markups.
<ul>
<li>At the aggregate level, we can infer markups from the labour share for example.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This means we need an estimator to obtain the markup.</p>
</div>
</div>
</section>
<section id="how-does-the-hall-1988-markup-estimator-work" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-hall-1988-markup-estimator-work">How does the Hall (1988) markup estimator work?</h3>
<p>The production function approach to markup estimation.</p>
<p>Assume that all firms have the following production function:</p>
<p><span class="math display">\[
Y_{it} = A_{it}K_{it}^{\alpha_k}L_{it}^{\alpha_l}M_{it}^{\alpha_m}
\]</span></p>
<p>For a given output level, the firmâ€™s objective is to minimise their costs, subject to a given production level, by choosing their mix of factor inputs:</p>
<p><span class="math display">\[
\text{TC}_{it} = R_tK_{it} + W_tL_{it}+P_t^mM_{it}
\]</span></p>
<p><span class="math display">\[
\mathcal{L}=R_tK_{it} + W_tL_{it}+P_t^mM_{it} - \lambda_{it}[A_{it}K_{it}^{\alpha_k}L_{it}^{\alpha_l}M_{it}^{\alpha_m}-Y_{it}]
\]</span></p>
<ul>
<li><span class="math inline">\(\lambda_{it}\)</span> is the marginal cost of production.</li>
</ul>
<p>We assume that firms choose <span class="math inline">\(M_{it}\)</span> each period without adjustment costs.</p>
<ul>
<li><p>This is because it is easy for firms to adjust the amount of materials they purchase, but not easy to adjust labour or capital.</p></li>
<li><p>What is the optimisation?</p>
<p><span class="math display">\[
  \left.\frac{\delta\mathcal{L}}{\delta M_{it}}\right |_{M^*} = P_t^m - \lambda_{it}A_{it}K_{it}^{\alpha_k}L_{it}^{\alpha_l}m_{it}^{\alpha_m- 1}\alpha_m = 0\\
  \]</span> <span class="math display">\[
  P_t^m = \lambda_{it}\alpha_m\left(\frac{Y_{it}}{M_{it}}\right)\\
  \]</span> <span class="math display">\[
  \frac{P_{it}}{\lambda_{it}} = \alpha_m\left(\frac{P_{it}Y_{it}}{P_t^mM_{it}}\right) = \mu_{it}
  \]</span></p>
<ul>
<li><span class="math inline">\(P_{it}Y_{it}\)</span> is total firm revenue and <span class="math inline">\(P_t^m M_{it}\)</span> is total spending on goods from other firms.
<ul>
<li>These are both things that we can get from the income statement.</li>
</ul></li>
<li>The only thing we donâ€™t know is the output elasticity <span class="math inline">\(\alpha_m\)</span>.</li>
</ul></li>
</ul>
</section>
<section id="how-can-we-use-the-estimator" class="level3">
<h3 class="anchored" data-anchor-id="how-can-we-use-the-estimator">How can we use the estimator?</h3>
<ul>
<li><p>What are the different stages?</p>
<ol type="1">
<li>Use revenue and costs data from accounting data.
<ul>
<li>Assume that cost of goods sold is chosen without adjustment costs.</li>
<li>Use sector deflated sales to measure output.</li>
</ul></li>
<li>Estimate the production function of firms to obtain <span class="math inline">\(\alpha_m\)</span>.
<ul>
<li>Controlling for other inputs: capital, sales, general administrative expenses.</li>
</ul></li>
<li>Assume firms within broad industries have the same <span class="math inline">\(\alpha_m\)</span>.</li>
</ol></li>
<li><p>What is the estimation process?</p>
<p>Assume that the log of productivity is a linear first-order autoregressive process:</p>
<p><span class="math display">\[
  y_{it} = {a}_{it}+\alpha_k k_{it} + \alpha_l l_{it} + \alpha_m m_{it}
  \]</span> <span class="math display">\[
  a_{it} = \rho a_{it-1} + \eta_{it}
  \]</span></p>
<ul>
<li>We canâ€™t just run OLS on the first equation as we have correlation between the error term, which is productivity, and the regressors. This means we need an identification assumption.
<ul>
<li>Highly productive firms will naturally produce more and therefore use more inputs than low productivity firms.</li>
</ul></li>
</ul>
<p>The identification assumption is that firms donâ€™t know <span class="math inline">\(\eta_{it}\)</span> at time <span class="math inline">\(t-1\)</span>.</p>
<ul>
<li>This means that <span class="math inline">\(k_{it-1}, l_{it-1}, m_{it-1}\)</span> should be uncorrelated with <span class="math inline">\(\eta_{it}\)</span>, as firms donâ€™t know yet what the shock to productivity is going to be.</li>
<li>How can we arrive at our estimates?
<ol type="1">
<li><p>Guess values for <span class="math inline">\(\alpha_k, \alpha_l,\alpha_m\)</span>.</p></li>
<li><p>Calculate productivity using these guesses:</p>
<p><span class="math display">\[
a_{it} = y_{it} - \alpha_kk_{it} - \alpha_l l_{it} - \alpha_m m_{it}
\]</span></p></li>
<li><p>Regress <span class="math inline">\(a_{it} = \rho a_{it-1} + \eta_{it}\)</span> to find <span class="math inline">\(\rho\)</span> and <span class="math inline">\(\eta_{it}\)</span>.</p></li>
<li><p>Update the guesses until <span class="math inline">\(\eta_{it}\)</span> is not correlated with <span class="math inline">\(k_{it-1}, l_{it-1}, m_{it-1}\)</span>.</p></li>
</ol></li>
</ul>
<p><img src="Productivity dispersion, concentration, oligopoly 18fa84b4cffb8049943bfe2c18817fd5/Screenshot_2025-02-07_at_10.13.25.png" class="img-fluid"></p></li>
</ul>
</section>
</section>
<section id="oligopoly-atkeson-and-burstein-2008" class="level2">
<h2 class="anchored" data-anchor-id="oligopoly-atkeson-and-burstein-2008">Oligopoly: Atkeson and Burstein (2008)</h2>
<section id="how-does-the-atkeson-and-burstein-model-alter-the-dixit-stiglitz-model" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-atkeson-and-burstein-model-alter-the-dixit-stiglitz-model">How does the Atkeson and Burstein model alter the Dixit-Stiglitz model?</h3>
<p>The Dixit-Stiglitz model focussed on product differentiation as the main source of market power. The Atkeson and Burstein model focusses on markets being sufficiently small for firms to interact strategically as the main source of market power.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Some firms compete very closely, for example, Itsu and Wasabi on High Holborn. Conversely, other firms donâ€™t really compete at all, for example, Itsu in High Holborn, and the Ford dealership in Ashford.</p>
</div>
</div>
<ul>
<li>There are many sectors in the economy (products, locations, etc).</li>
<li>It is very difficult to substitute goods across sectors.</li>
<li>Within sectors, a small number of closer substitute firms compete.</li>
<li>What are the consequences of these alterations?
<ul>
<li>Large firms will have less competition and therefore higher markups.</li>
<li>Markups increase convexly in market share.</li>
<li>Productivity dispersion causes an increase in average markup and markup dispersion.</li>
</ul></li>
</ul>
</section>
<section id="what-is-the-model-environment" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-model-environment">What is the model environment?</h3>
<ul>
<li><p>Aggregate consumption <span class="math inline">\(C\)</span> is a Dixit-Stiglitz basket of many <strong>sectors</strong>.</p>
<p><span class="math display">\[
  C = \left[\int_0^1 C_j^{\frac{\epsilon - 1}{\epsilon}} dj\right]^{\frac{\epsilon}{\epsilon -1}}
  \]</span></p></li>
<li><p>Demand for sector <span class="math inline">\(j\)</span>â€™s output depends on the price index:</p>
<p><span class="math display">\[
  C_j = P_j^{-\epsilon}Y
  \]</span></p></li>
<li><p>A sectorâ€™s output is produced by <span class="math inline">\(N_j\)</span> firms <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[
  C_j = \left[\sum_{i=1}^{N_j}C_{ij}^{\frac{\sigma - 1}{\sigma}}dj\right]^{\frac{\sigma}{\sigma - 1}}
  \]</span></p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Key assumption is that <span class="math inline">\(\sigma &gt; \epsilon\)</span>: meaning that goods are more similar within sectors than across sectors.</p>
</div>
</div>
</section>
<section id="what-is-the-household-optimisation-problem" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-household-optimisation-problem">What is the household optimisation problem?</h3>
<p><span class="math display">\[
\mathcal{L} = \sum_{i=1}^{N_j}(P_{ij} \times C_{ij}) - \lambda\left( \left[ \sum_{i = 1}^{N_j} C_{ij}^{\frac{\sigma - 1}{\sigma}} di\right]^{\frac{\sigma}{\sigma - 1}} - C_j\right)
\]</span></p>
<p>The first order condition with respect to <span class="math inline">\(C_i\)</span> is,</p>
<p><span class="math display">\[
\begin{split}
\left.\frac{\delta\mathcal{L}}{\delta C_i}\right|_{C_i^*} &amp;= P_{ij} - \lambda \frac{\sigma}{\sigma - 1} \left[ \sum_{i = 1}^{N_j} C_{ij}^{\frac{\sigma - 1}{\sigma}} di\right]^{\frac{\sigma}{\sigma - 1} -1} \frac{\sigma - 1}{\sigma} C_{ij}^{\frac{\sigma - 1}{\sigma} - 1} = 0\\
P_{ij} &amp;= \lambda \left[ \sum_{i = 1}^{N_j} C_{ij}^{\frac{\sigma - 1}{\sigma}} di\right]^{\frac{1}{\sigma - 1}} C_{ij}^{-\frac{1}{\sigma}}\\
P_{ij}^{-\sigma} &amp;=\lambda^{-\sigma}C_j^{-1}C_{ij}\\
C_{ij}&amp;=\lambda^\sigma P_{ij}^{-\sigma}C_j
\end{split}
\]</span></p>
<p>To get rid of the Lagrange multiplier, we can use the relative demand between two goods:</p>
<p><span class="math display">\[
\frac{C_{ij}}{C_1} = \frac{\lambda^\sigma P_{ij}^{-\sigma}C_j}{\lambda^\sigma P_{1}^{-\sigma}C_j} \implies \frac{C_{ij}}{C_1} = \left(\frac{P_{ij}}{P_1}\right)^{-\sigma}
\]</span></p>
<p>Therefore the relative demand between two goods is determined by the price ratio and how similar they are.</p>
<p>Inserting this into the customers total spending on consumption baskets for that sector:</p>
<p><span class="math display">\[
\sum_{i=1}^{N_j}P_{ij}C_{ij}di = \sum_{i=1}^{N_j} P_{ij} C_1\left(\frac{P_{ij}}{P_1}\right)^{-\sigma}\\
\implies C_1 = P_1^{-\sigma}\left(
\frac{\sum_{i=1}^{N_j} P_{ij}C_{ij}}{\sum_{i=1}^{N_j} P_{ij}^{1-\sigma}}
\right)
\]</span></p>
<p>Using the definition of the sector price index <span class="math inline">\(P_j\)</span>,</p>
<p><span class="math display">\[
P_j \equiv \frac{\sum_{i=1}^{N_j} P_{ij}C_{ij}}{C_j}
\]</span></p>
</section>
<section id="what-is-the-firm-optimisation-problem" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-firm-optimisation-problem">What is the firm optimisation problem?</h3>
<p>Firms have constant marginal costs <span class="math inline">\(\text{MC}_{ij}\)</span> such that profits are,</p>
<p><span class="math display">\[
\pi_{ij} = (P_{ij} - \text{MC}_{ij})C_{ij}
\]</span></p>
<p>Firms want to maximise their profits by setting their price. <span class="math inline">\(C_{ij}\)</span> is a function of <span class="math inline">\(P_{ij}\)</span>.</p>
<p><span class="math display">\[
\begin{split}
\left .\frac{\delta \pi_{ij}}{\delta P_{ij}}\right|_{P_{ij}^*} &amp;= C_{ij} + P_{ij} \frac{\delta C_{ij}}{\delta P_{ij}} - \text{MC}_{ij} \frac{\delta C_{ij}}{\delta P_{ij}} = 0 \text{ }\textcolor{red}{(\times P_{ij}, \div C_{ij})}\\
&amp;\implies P_{ij} + P_{ij}\frac{P_{ij}}{C_{ij}}\frac{\delta C_{ij}}{\delta P_{ij}} - \text{MC}_{ij}\frac{P_{ij}}{C_{ij}}\frac{\delta C_{ij}}{\delta P_{ij}} = 0\\
&amp;\implies P_{ij} = \text{MC}_{ij}\left(\frac{\frac{P_{ij}}{C_{ij}}\frac{\delta C_{ij}}{\delta P_{ij}}}{1+\frac{P_{ij}}{C_{ij}}\frac{\delta C_{ij}}{\delta P_{ij}}}\right) = \text{MC}_{ij} \left(\frac{-\varepsilon_{ij}}{1 - \varepsilon_{ij}}\right)
\end{split}
\]</span></p>
<p>This gives the famous oligopoly result,</p>
<p><span class="math display">\[
P_{ij} =\text{MC}_{ij}\left(\frac{\varepsilon_{ij}}{\varepsilon_{ij}-1}\right)
\]</span></p>
<p><span class="math inline">\(-\varepsilon_{ij}\)</span> is the price elasticity of demand.</p>
<ul>
<li><p>What is the markup determined by in this model?</p>
<p>The markup <span class="math inline">\(\mu_{ij}\)</span> is now determined by the price elasticity of demand.</p>
<p><span class="math display">\[
  \mu_{ij} = \left(\frac{\varepsilon_{ij}}{\varepsilon_{ij}-1}\right)
  \]</span></p>
<ul>
<li>In last weekâ€™s model, the epsilon was constant, but here, the price elasticity of demand varies across firms.
<ul>
<li>Some firms will have a low PED and therefore a high markup meaning that it is hard for the household to substitute away from their goods, so firms can cahrge higher prices.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="concentration-and-markup" class="level2">
<h2 class="anchored" data-anchor-id="concentration-and-markup">Concentration and Markup</h2>
<p>To determine the markup, we have to know what the price elasticity of demand is.</p>
<p><span class="math display">\[
\mu_{ij} = \left(\frac{\varepsilon_{ij}}{\varepsilon_{ij}-1}\right)
\]</span></p>
<section id="what-determines-the-price-elasticity-of-demand" class="level3">
<h3 class="anchored" data-anchor-id="what-determines-the-price-elasticity-of-demand">What determines the price elasticity of demand?</h3>
<p>The main insights of the Atkeson and Burstein model are,</p>
<ul>
<li>Larger firms have lower price elasticity of demand <span class="math inline">\(\varepsilon_{ij}\)</span>.
<ul>
<li>This is caused by the effect of a large firmâ€™s price increases on the sector price index.</li>
<li>If a monopolist raises prices, households can only substitute away to other sectors.</li>
</ul></li>
</ul>
</section>
<section id="how-can-we-determine-the-markup" class="level3">
<h3 class="anchored" data-anchor-id="how-can-we-determine-the-markup">How can we determine the markup?</h3>
<p><strong>Step 1 â€” Find firm demand as a function of prices.</strong></p>
<p>The firm and sector demand functions are,</p>
<p><span class="math display">\[
C_{ij} = \left(\frac{P_{ij}}{P_j}\right)^{-\sigma}Y_j \text{ and }Y_j = P_j^{-\epsilon}C
\]</span></p>
<ul>
<li>For example, the first function is the demand for Itsu sushi on High Holborn, while the second function is the total demand for sushi on High Holborn.</li>
</ul>
<p>We can combine these two functions to get a demand function for â€˜Itsuâ€™ sushi (firm demand) in terms of total consumption <span class="math inline">\(C\)</span> and the firm and sector prices.</p>
<p><span class="math display">\[
\begin{split}
C_{ij} &amp;= \left(\frac{P_{ij}}{P_j}\right)^{-\sigma}P_j^{-\epsilon}C\\
C_{ij} &amp;= P_{ij}^{-\sigma}P_j^{\sigma - \epsilon}C
\end{split}
\]</span></p>
<p><strong>Step 2 â€” Take logs and derivatives to get price elasticity of demand.</strong></p>
<p>In order to calculate the price elasticity, we need to take the <span class="math inline">\(\log\)</span> of the function above and then take the derivative with respect to price.</p>
<p><span class="math display">\[
\ln C_{ij} = -\sigma\ln(P_{ij}) + (\sigma - \epsilon)\ln(P_j) + \ln (C)
\]</span> <span class="math display">\[
\frac{\delta \ln(C_{ij})}{\delta \ln(P_{ij})} = -\sigma + (\sigma - \epsilon)\frac{\delta \ln(P_j)}{\delta \ln(P_{ij})}
\]</span></p>
<p><strong>Step 3 â€” Calculate <span class="math inline">\(\frac{\delta \ln(P_j)}{\delta \ln(P_{ij})}\)</span>.</strong></p>
<p>Because there are only a few firms in each sector, the sectorâ€™s price index depends on <span class="math inline">\(P_{ij}\)</span>.</p>
<p><span class="math display">\[
P_j = \left[\sum_{i=1}^{N_j} P_{ij}^{1-\sigma}\right]^{\frac{1}{1-\sigma}}\\
\]</span> <span class="math display">\[
\ln P_j = \frac{1}{1-\sigma} \ln \left[\sum_{i=1}^{N_j} P_{ij}^{1-\sigma}\right]\\
\]</span> <span class="math display">\[
\begin{split}
\frac{\delta \ln(P_j)}{\delta \ln(P_{ij})} &amp;= \left(\frac{1}{1-\sigma}\right)\frac{1}{\sum_{i=1}^{N_j} P_{ij}^{1-\sigma}} \frac{\delta P_{ij}^{1-\sigma}}{\delta \ln(P_{ij})}\\
&amp;= \left(\frac{1}{1-\sigma}\right)\frac{1}{P_j^{1-\sigma}}P_{ij}^{-\sigma} (1-\sigma)P_{ij}\\
&amp;= \frac{P_{ij}^{1-\sigma}}{P_j^{1-\sigma}}
\end{split}
\]</span></p>
<ul>
<li><p>What two things does the second to last line use?</p>
<p>The first part comes from the price index equation:</p>
<p><span class="math display">\[
  P_j = \left[\sum_{i=1}^{N_j} P_{ij}^{1-\sigma}\right]^{\frac{1}{1-\sigma}} \implies \sum_{i=1}^{N_j} P_{ij}^{1-\sigma} = P_j^{1-\sigma}
  \]</span></p>
<p>The second part uses the a <span class="math inline">\(\log\)</span> derivative rule:</p>
<p><span class="math display">\[
  \frac{\delta f(x)}{\delta \ln(x)} = \frac{\delta f(x)}{\delta x} \cdot x
  \]</span></p></li>
</ul>
<p><strong>Step 4 â€” Show that <span class="math inline">\(\frac{P_{ij}^{1-\sigma}}{P_j^{1-\sigma}}\)</span> is equal to the firmâ€™s market share.</strong></p>
<p><span class="math display">\[
\text{Firm revenue} = P_{ij}C_{ij} = P_{ij}^{1-\sigma}P_j^{\sigma - \epsilon}C\\
\]</span> <span class="math display">\[
\text{Sector revenue} = P_jC_j = P_j^{1-\epsilon}C\\
\]</span> <span class="math display">\[
\text{Market share} = S_{ij} = \frac{P_{ij}C_{ij}}{P_jC_j} = \frac{P_{ij}^{1-\sigma}P_j^{\sigma - \epsilon}C}{P_j^{1-\epsilon}C} = \frac{P_{ij}^{1-\sigma}}{P_j^{1-\sigma}}
\]</span></p>
<p>We can insert this into the price elasticity equation,</p>
<p><span class="math display">\[
\frac{\delta \ln(C_{ij})}{\delta \ln(P_{ij})} = -\sigma + (\sigma - \epsilon)S_{ij}
\]</span> <span class="math display">\[
-\varepsilon_{ij} = -\sigma + (\sigma - \epsilon)S_{ij}
\]</span> <span class="math display">\[
\varepsilon_{ij} = \sigma(1-S_{ij}) + \epsilon S_{ij}
\]</span></p>
</section>
<section id="what-happens-if-you-are-an-infinitesimal-firm" class="level3">
<h3 class="anchored" data-anchor-id="what-happens-if-you-are-an-infinitesimal-firm">What happens if you are an infinitesimal firm?</h3>
<p><span class="math display">\[
S_ij \to 0 \implies \varepsilon_{ij} = \sigma(1-S_{ij}) + \epsilon S_{ij} \to \sigma
\]</span> <span class="math display">\[
\implies P_{ij} =\text{MC}_{ij} \left(\frac{\sigma}{\sigma - 1}\right)
\]</span></p>
<ul>
<li>This shows that very small firms compete within their own sector.</li>
</ul>
</section>
<section id="what-happens-if-you-are-a-monopolist" class="level3">
<h3 class="anchored" data-anchor-id="what-happens-if-you-are-a-monopolist">What happens if you are a monopolist?</h3>
<p><span class="math display">\[
S_{ij} \to 1 \implies \varepsilon_{ij} = \sigma(1-S_{ij}) + \epsilon S_{ij} \to \epsilon
\]</span> <span class="math display">\[
\implies P_{ij} = \text{MC}_{ij}\left(\frac{\epsilon}{\epsilon - 1}\right)
\]</span></p>
<ul>
<li>This shows that very large firms compete more across sectors.</li>
</ul>
</section>
<section id="how-does-the-markup-increase-with-market-share" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-markup-increase-with-market-share">How does the markup increase with market share?</h3>
<p>A standard calibration of parameters sets <span class="math inline">\(\sigma = 10\)</span> and <span class="math inline">\(\epsilon = 1.1\)</span>.</p>
<p><img src="Productivity dispersion, concentration, oligopoly 18fa84b4cffb8049943bfe2c18817fd5/markup_vs_market_share.png" class="img-fluid"></p>
<ul>
<li>This shows markups increasing convexly with market share meaning that as market share approaches 100%, markups increase faster and faster.</li>
</ul>
</section>
<section id="can-the-model-explain-the-trends-we-see-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="can-the-model-explain-the-trends-we-see-in-the-data">Can the model explain the trends we see in the data?</h3>
<ul>
<li>The model can show a rise in markups over time.</li>
<li>The model can also show a rise in markup dispersion over time.</li>
<li>Finally, the model can explain that if productivity differences cause an increase in concentration, markups and markup dispersion increase endogenously.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>